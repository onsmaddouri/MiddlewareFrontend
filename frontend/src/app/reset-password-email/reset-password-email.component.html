<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-6 col-lg-5">
      <div class="card shadow">
        <div class="card-header text-white text-center" style="background: #046aa1;">
          <h4 class="mb-0">
            <i class="fas fa-lock me-2"></i>Réinitialiser le mot de passe
          </h4>
        </div>
        <div class="card-body p-4">
          <div *ngIf="!isSuccessful" class="text-center mb-4">
            <i class="fas fa-shield-alt fa-3x mb-3" style="color: #046aa1;"></i>
            <p class="text-muted">
              Saisissez votre email, le code reçu et votre nouveau mot de passe
            </p>
          </div>

          <div *ngIf="isSuccessful" class="text-center mb-4">
            <i class="fas fa-check-circle fa-3x mb-3" style="color: #046aa1;"></i>
            <h5 style="color: #046aa1;">Mot de passe modifié !</h5>
            <p class="text-muted">{{ successMessage }}</p>
            <p class="text-muted">
              Vous pouvez maintenant vous connecter avec votre nouveau mot de passe.
            </p>
          </div>

          <form *ngIf="!isSuccessful" (ngSubmit)="onSubmit()" #f="ngForm">
            <div class="form-group mb-3">
              <label for="email" class="form-label">
                <i class="fas fa-envelope me-1"></i>Adresse email
              </label>
              <input 
                type="email" 
                class="form-control" 
                id="email"
                name="email"
                [(ngModel)]="form.email" 
                required
                email
                placeholder="votre.email@exemple.com">
            </div>

            <div class="form-group mb-3">
              <label for="code" class="form-label">
                <i class="fas fa-key me-1"></i>Code de réinitialisation
              </label>
              <input 
                type="text" 
                class="form-control text-center" 
                id="code"
                name="code"
                [(ngModel)]="form.code" 
                (input)="onCodeInput($event)"
                required
                maxlength="6"
                placeholder="123456"
                style="font-size: 1.5rem; letter-spacing: 0.5rem;">
              <small class="form-text text-muted">
                Code à 6 chiffres reçu par email
              </small>
            </div>

            <div class="form-group mb-3">
              <label for="newPassword" class="form-label">
                <i class="fas fa-lock me-1"></i>Nouveau mot de passe
              </label>
              <input 
                type="password" 
                class="form-control" 
                id="newPassword"
                name="newPassword"
                [(ngModel)]="form.newPassword" 
                required
                minlength="6"
                placeholder="Votre nouveau mot de passe">
              <small class="form-text text-muted">
                Minimum 6 caractères
              </small>
            </div>

            <div *ngIf="isResetFailed" class="alert alert-danger" role="alert">
              <i class="fas fa-exclamation-triangle me-2"></i>{{ errorMessage }}
            </div>

            <div class="d-grid gap-2">
              <button 
                type="submit" 
                class="btn btn-primary btn-lg"
                [disabled]="f.invalid">
                <i class="fas fa-save me-2"></i>Réinitialiser le mot de passe
              </button>
            </div>
          </form>

          <div *ngIf="isSuccessful" class="d-grid gap-2">
            <a 
              routerLink="/login"
              class="btn btn-primary btn-lg text-decoration-none">
              <i class="fas fa-sign-in-alt me-2"></i>Se connecter
            </a>
          </div>

          <hr class="my-4">
          
          <div class="text-center">
            <a routerLink="/forgot-password-email" class="text-decoration-none">
              <i class="fas fa-arrow-left me-1"></i>Demander un nouveau code
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

